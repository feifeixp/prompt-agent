# 🔑 Cloudflare 环境变量配置指南

## 问题已修复 ✅

已修复以下两个错误：
1. ✅ **404 错误** - `/vite.svg` 不存在 → 已改为使用 `/ZLLogo.png`
2. ✅ **401 错误** - OpenRouter API 认证失败 → 已实现运行时环境变量获取

## 📝 现在需要做什么

代码已自动部署到 Cloudflare，但你需要在 Cloudflare Dashboard 中配置环境变量。

## 🚀 配置步骤（3 分钟完成）

### 方法一：通过 Cloudflare Dashboard 配置（推荐）

1. **访问 Cloudflare Dashboard**
   - 打开 https://dash.cloudflare.com/
   - 登录你的账号

2. **进入 Workers & Pages**
   - 在左侧菜单选择 "Workers & Pages"
   - 找到并点击你的项目 `prompt-agent`

3. **配置环境变量**
   - 点击 "Settings" 标签
   - 在左侧菜单选择 "Variables and Secrets"
   - 点击 "Add variable" 按钮

4. **添加以下两个环境变量**

   **变量 1：**
   - Variable name: `VITE_OPENROUTER1_API_KEY`
   - Value: `你的 OpenRouter API Key`
   - 类型：选择 "Encrypt" (加密)
   - 点击 "Save"

   **变量 2：**
   - Variable name: `VITE_DEEPSEEK_API_KEY`
   - Value: `你的 DeepSeek API Key`
   - 类型：选择 "Encrypt" (加密)
   - 点击 "Save"

5. **重新部署**
   - 配置完成后，Cloudflare 会自动重新部署
   - 或者你可以点击 "Deployments" → "View details" → "Redeploy"

### 方法二：通过命令行配置（可选）

如果你更喜欢使用命令行：

```bash
# 设置 OpenRouter API Key
wrangler secret put VITE_OPENROUTER1_API_KEY
# 输入你的 API Key 后按回车

# 设置 DeepSeek API Key
wrangler secret put VITE_DEEPSEEK_API_KEY
# 输入你的 API Key 后按回车
```

## 🔍 验证配置

配置完成后，访问你的网站：
- 打开浏览器开发者工具（F12）
- 访问你的 Cloudflare Workers URL
- 在 Console 中不应该再看到 401 错误
- AI 助手和工作台的 AI 优化功能应该可以正常工作

## 📋 环境变量说明

| 变量名 | 用途 | 获取方式 |
|--------|------|----------|
| `VITE_OPENROUTER1_API_KEY` | OpenRouter API 认证 | 在 https://openrouter.ai/ 注册并获取 |
| `VITE_DEEPSEEK_API_KEY` | DeepSeek API 认证（备用） | 在 https://platform.deepseek.com/ 注册并获取 |

## ⚠️ 重要提示

1. **不要将 API Key 提交到 Git**
   - `.gitignore` 已配置忽略 `.dev.vars`
   - 永远不要在代码中硬编码 API Key

2. **使用加密存储**
   - 在 Cloudflare Dashboard 中添加变量时，选择 "Encrypt"
   - 这样 API Key 会被安全加密存储

3. **本地开发**
   - 本地开发时，复制 `.dev.vars.example` 为 `.dev.vars`
   - 在 `.dev.vars` 中填入你的 API Keys
   - 这个文件不会被提交到 Git

## 🎉 完成

配置完成后，你的应用应该可以正常工作了！

如果还有问题，请检查：
- Cloudflare Dashboard 中的环境变量是否正确配置
- 变量名是否完全匹配（区分大小写）
- 是否已重新部署

